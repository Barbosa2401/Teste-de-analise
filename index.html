<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lotomania Intelligence PRO v7.5 - Validador Supremo</title>
    <style>
        :root {
            --primary: #f58220; --secondary: #2c3e50; --bg: #f0f2f5;
            --white: #ffffff; --accent: #28a745; --purple: #6f42c1; --blue: #007bff;
        }
        body { font-family: 'Segoe UI', sans-serif; background-color: var(--bg); padding: 20px; }
        .container { max-width: 1100px; margin: auto; background: var(--white); padding: 25px; border-radius: 15px; box-shadow: 0 5px 20px rgba(0,0,0,0.1); }
        header { text-align: center; border-bottom: 3px solid var(--primary); margin-bottom: 20px; padding-bottom: 10px; }
        .section { margin-bottom: 20px; padding: 15px; border: 1px solid #ddd; border-radius: 8px; }
        textarea { width: 100%; height: 120px; border: 2px solid var(--primary); border-radius: 5px; padding: 10px; font-family: monospace; }
        .btn-group { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin: 15px 0; }
        button { padding: 12px; border: none; border-radius: 5px; cursor: pointer; font-weight: bold; color: white; }
        .btn-p { background: var(--primary); }
        .btn-m { background: var(--purple); }
        .game-display { background: #fdfdfd; padding: 15px; border-left: 5px solid; margin-top: 10px; }
        .nums { font-family: monospace; font-size: 15px; color: #333; word-spacing: 5px; line-height: 2; }
        .validacao-tag { display: inline-block; margin-top: 10px; padding: 5px 10px; border-radius: 4px; font-size: 0.8em; font-weight: bold; }
        .ok { background: #d4edda; color: #155724; }
        .erro { background: #f8d7da; color: #721c24; }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>Lotomania Intelligence PRO v7.5</h1>
        <p>Garantia de Espelhamento e An√°lise de Paridade</p>
    </header>

    <div class="section">
        <h3>1. Alimentar Hist√≥rico de 50 Jogos</h3>
        <textarea id="historico" placeholder="Cole os 50 resultados aqui..."></textarea>
        <div class="btn-group">
            <button class="btn-p" onclick="processar()">üìä Analisar e Gerar In√©ditos</button>
            <button class="btn-m" onclick="gerarEspelhoMatematico()">üîÆ Gerar Espelho Real (Inverso)</button>
        </div>
    </div>

    <div id="painel" style="display:none;">
        <div class="section" style="background:#e3f2fd; border-color:var(--blue);">
            <strong>üìä Paridade M√©dia:</strong> 
            Pares: <span id="pVal" style="font-weight:bold">0</span> | 
            √çmpares: <span id="iVal" style="font-weight:bold">0</span>
        </div>

        <div class="game-display" style="border-color: var(--secondary);">
            <strong>üåë JOGO B (IN√âDITOS/ATRASO):</strong>
            <div id="displayIneditos" class="nums"></div>
        </div>

        <div id="boxEspelho" class="game-display" style="border-color: var(--purple); display:none;">
            <strong>üîÆ JOGO C (ESPELHO MATEM√ÅTICO):</strong>
            <div id="displayEspelho" class="nums"></div>
            <div id="statusValidacao" class="validacao-tag"></div>
        </div>
    </div>
</div>

<script>
    let ineditosSet = new Set();

    function processar() {
        const txt = document.getElementById('historico').value;
        const nums = txt.match(/\b\d{1,2}\b/g);
        if (!nums || nums.length < 20) return alert("Insira dados v√°lidos!");

        const totalSorteios = Math.floor(nums.length / 20);
        let freq = Array(100).fill(0);
        let pares = 0, impares = 0;

        nums.forEach(n => {
            let v = parseInt(n);
            if (v < 100) {
                freq[v]++;
                if (v % 2 === 0) pares++; else impares++;
            }
        });

        document.getElementById('pVal').innerText = (pares / totalSorteios).toFixed(1);
        document.getElementById('iVal').innerText = (impares / totalSorteios).toFixed(1);

        let ranking = [];
        for(let i=0; i<100; i++) ranking.push({ d: i.toString().padStart(2,'0'), f: freq[i] });

        // Seleciona os 50 que menos sa√≠ram (In√©ditos)
        const ineditosArray = [...ranking].sort((a,b) => a.f - b.f).slice(0, 50).map(x => x.d).sort();
        ineditosSet = new Set(ineditosArray); // Armazena em Set para compara√ß√£o r√°pida

        document.getElementById('displayIneditos').innerText = ineditosArray.join(" ");
        document.getElementById('painel').style.display = "block";
        document.getElementById('boxEspelho').style.display = "none";
    }

    function gerarEspelhoMatematico() {
        if (ineditosSet.size === 0) return alert("Gere o Jogo B primeiro!");

        const espelhoArray = [];
        for (let i = 0; i < 100; i++) {
            let dezena = i.toString().padStart(2, '0');
            // Se N√ÉO est√° no conjunto de In√©ditos, vai para o Espelho
            if (!ineditosSet.has(dezena)) {
                espelhoArray.push(dezena);
            }
        }

        document.getElementById('displayEspelho').innerText = espelhoArray.sort().join(" ");
        
        // --- VALIDA√á√ÉO REAL ---
        const duplicados = espelhoArray.filter(n => ineditosSet.has(n));
        const status = document.getElementById('statusValidacao');
        
        if (duplicados.length === 0 && espelhoArray.length === 50) {
            status.innerText = "‚úÖ VALIDA√á√ÉO: 100% ESPELHADO (Sem n√∫meros repetidos)";
            status.className = "validacao-tag ok";
        } else {
            status.innerText = "‚ùå ERRO: Foram encontrados n√∫meros repetidos!";
            status.className = "validacao-tag erro";
        }

        document.getElementById('boxEspelho').style.display = "block";
    }
</script>
</body>
</html>