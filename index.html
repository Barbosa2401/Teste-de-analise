<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lotomania Intelligence PRO v10.4 - Full Simulator</title>
    <style>
        :root {
            --primary: #f58220; --secondary: #2c3e50; --bg: #f0f2f5;
            --white: #ffffff; --accent: #28a745; --purple: #6f42c1; --blue: #007bff; --red: #d32f2f; --gold: #ffd700;
        }
        body { font-family: 'Segoe UI', sans-serif; background-color: var(--bg); padding: 20px; color: var(--secondary); }
        .container { max-width: 1200px; margin: auto; background: var(--white); padding: 25px; border-radius: 15px; box-shadow: 0 5px 20px rgba(0,0,0,0.1); }
        header { text-align: center; border-bottom: 3px solid var(--primary); margin-bottom: 20px; padding-bottom: 10px; }
        
        .section { margin-bottom: 20px; padding: 15px; border: 1px solid #ddd; border-radius: 10px; }
        textarea { width: 100%; height: 120px; border: 2px solid var(--primary); border-radius: 5px; padding: 10px; font-family: monospace; box-sizing: border-box; }
        
        .btn-main { background: var(--primary); width: 100%; padding: 15px; color: white; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; font-size: 18px; margin-bottom: 15px; }
        .btn-mirror { background: var(--purple); color: white; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer; font-size: 0.8em; margin-top: 5px; }
        
        .grid-layout { display: grid; grid-template-columns: 1.2fr 0.8fr; gap: 20px; }
        .game-card { background: #f8f9fa; padding: 15px; border-radius: 8px; border-left: 6px solid; margin-bottom: 15px; }
        .nums { font-family: monospace; font-size: 14px; color: #333; background: #fff; padding: 10px; border: 1px dashed #ccc; border-radius: 4px; margin-top: 8px; line-height: 2.2; }
        .num-ball { display: inline-block; width: 22px; text-align: center; margin: 0 2px; border-radius: 3px; }
        .hit { background-color: var(--accent) !important; color: white !important; font-weight: bold; }
        
        .quad-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .quad-card { background: white; border: 1px solid #ddd; padding: 10px; border-radius: 8px; text-align: center; font-size: 0.85em; position: relative; cursor: help; }
        .viciado { background: #ffebee; border-color: #f44336; color: #d32f2f; }
        .frio { background: #e0f2f1; border-color: #00897b; color: #00695c; }
        
        .tooltip { display: none; position: absolute; background: #333; color: white; padding: 10px; border-radius: 5px; z-index: 100; width: 200px; font-size: 11px; top: 100%; left: 0; }
        .quad-card:hover .tooltip { display: block; }

        .sugestao-box { background: #e8eaf6; padding: 15px; border-radius: 10px; border-left: 6px solid var(--blue); margin-top: 15px; font-weight: bold; color: #1a237e; }
        .simulador { background: #fff9c4; padding: 15px; border-radius: 10px; border: 2px solid #fbc02d; margin-top: 15px; }

        /* Estilos do Novo Volante e Sorteador */
        .volante-section { background: #fff; border: 2px solid var(--secondary); padding: 20px; border-radius: 15px; margin-top: 20px; }
        .volante-grid { display: grid; grid-template-columns: repeat(10, 1fr); gap: 5px; margin: 15px 0; }
        .num-btn { padding: 10px 0; border: 1px solid #ccc; background: #fff; cursor: pointer; border-radius: 5px; font-weight: bold; transition: 0.2s; }
        .num-btn:hover { background: #eee; }
        .selected { background: var(--secondary) !important; color: white; border-color: var(--secondary); }
        .machine-hit { background: var(--gold) !important; color: #000 !important; border-color: #b8860b; box-shadow: 0 0 8px var(--gold); transform: scale(1.05); z-index: 10; }
        .draw-results { background: #f0f0f0; padding: 15px; border-radius: 10px; margin-top: 15px; display: none; text-align: center; }
        .drawn-ball { display: inline-block; width: 30px; height: 30px; line-height: 30px; background: var(--red); color: white; border-radius: 50%; margin: 3px; font-size: 14px; font-weight: bold; }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>Lotomania Intelligence PRO v10.4</h1>
        <p>An√°lise de Quadrantes, Volante Interativo e Simulador</p>
    </header>

    <div class="section">
        <h3>1. Dados de Entrada (50 Concursos)</h3>
        <textarea id="historico" placeholder="Cole os resultados aqui..."></textarea>
        <button class="btn-main" onclick="analisarTudo()">üìä GERAR AN√ÅLISE COMPLETA</button>
    </div>

    <div id="painel" style="display:none;" class="grid-layout">
        <div>
            <div class="game-card" style="border-color: var(--primary);">
                <strong>üî• JOGO QUENTE (Tend√™ncia de Repeti√ß√£o)</strong>
                <div id="resQuente" class="nums"></div>
                <button class="btn-mirror" onclick="gerarEspelho('Quente')">üîÆ Gerar Espelho</button>
                <div id="espQuente" class="nums" style="display:none; border-color: var(--purple);"></div>
            </div>

            <div class="game-card" style="border-color: var(--secondary);">
                <strong>üåë JOGO IN√âDITO (Atraso/Ciclo)</strong>
                <div id="resInedito" class="nums"></div>
                <button class="btn-mirror" onclick="gerarEspelho('Inedito')">üîÆ Gerar Espelho</button>
                <div id="espInedito" class="nums" style="display:none; border-color: var(--purple);"></div>
            </div>

            <div class="game-card" style="border-color: var(--accent);">
                <strong>‚öñÔ∏è JOGO EQUILIBRADO (Misto Inteligente)</strong>
                <div id="resMisto" class="nums"></div>
                <button class="btn-mirror" onclick="gerarEspelho('Misto')">üîÆ Gerar Espelho</button>
                <div id="espMisto" class="nums" style="display:none; border-color: var(--purple);"></div>
            </div>

            <div class="volante-section">
                <h3 style="text-align: center; margin-top: 0; color: var(--secondary);">üïπÔ∏è VOLANTE INTERATIVO (Marque 50 n√∫meros)</h3>
                <div style="text-align: center; font-weight: bold; margin-bottom: 10px;">
                    Selecionados: <span id="countSim">0</span> / 50
                </div>
                <div class="volante-grid" id="volanteDigital"></div>
                <div style="display: flex; gap: 10px;">
                    <button class="btn-main" style="background: #666; font-size: 14px;" onclick="limparVolante()">LIMPAR VOLANTE</button>
                    <button class="btn-main" style="background: var(--red); font-size: 14px;" onclick="simularSorteioInterno()">üé∞ SIMULAR SORTEIO (20 DEZENAS)</button>
                </div>
                
                <div id="drawResults" class="draw-results">
                    <strong style="display: block; margin-bottom: 10px;">üî¥ RESULTADO DO SORTEIO SIMULADO:</strong>
                    <div id="drawnBallsContainer"></div>
                    <div id="scoreSimulacao" style="margin-top: 15px; font-size: 20px; font-weight: bold; color: var(--accent);"></div>
                </div>
            </div>
        </div>

        <div>
            <div class="section" style="background: #fdfdfd;">
                <strong style="display:block; text-align:center; margin-bottom:10px;">üß≠ MAPA E N√öMEROS DOS QUADRANTES</strong>
                <div class="quad-grid" id="quadContainer"></div>
            </div>

            <div id="sugestaoDia" class="sugestao-box"></div>

            <div class="simulador">
                <strong>üß™ CONFERIDOR R√ÅPIDO (RESULTADO OFICIAL)</strong>
                <input type="text" id="conferir" style="width:100%; padding:10px; margin-top:10px; border:1px solid #ccc;" placeholder="Resultado oficial...">
                <button class="btn-main" style="font-size: 14px; margin-top: 10px; background: var(--accent);" onclick="calcularPremiacao()">üí∞ CONFERIR ACERTOS</button>
                <div id="detalheAcertos" style="font-size: 12px; margin-top: 10px; text-align: center; font-weight: bold;"></div>
            </div>
        </div>
    </div>
</div>

<script>
    let jogosGlobais = { Quente: [], Inedito: [], Misto: [], QuenteEsp: [], IneditoEsp: [], MistoEsp: [] };
    let selecionadosVolante = new Set();
    
    // Defini√ß√£o t√©cnica dos n√∫meros por quadrante
    const dezenasPorQuad = [
        "00-04, 10-14, 20-24, 30-34, 40-44", // Q1
        "05-09, 15-19, 25-29, 35-39, 45-49", // Q2
        "50-54, 60-64, 70-74, 80-84, 90-94", // Q3
        "55-59, 65-69, 75-79, 85-89, 95-99"  // Q4
    ];

    // INICIALIZA√á√ÉO DO VOLANTE DIGITAL
    const vGrid = document.getElementById('volanteDigital');
    for (let i = 0; i < 100; i++) {
        let n = i.toString().padStart(2, '0');
        let btn = document.createElement('button');
        btn.className = 'num-btn';
        btn.innerText = n;
        btn.id = 'v-' + n;
        btn.onclick = () => toggleNumeroVolante(n);
        vGrid.appendChild(btn);
    }

    function toggleNumeroVolante(n) {
        if (selecionadosVolante.has(n)) {
            selecionadosVolante.delete(n);
            document.getElementById('v-' + n).classList.remove('selected');
        } else {
            if (selecionadosVolante.size >= 50) return alert("Limite de 50 n√∫meros atingido!");
            selecionadosVolante.add(n);
            document.getElementById('v-' + n).classList.add('selected');
        }
        document.getElementById('countSim').innerText = selecionadosVolante.size;
    }

    function limparVolante() {
        selecionadosVolante.clear();
        document.querySelectorAll('.num-btn').forEach(b => b.classList.remove('selected', 'machine-hit'));
        document.getElementById('countSim').innerText = "0";
        document.getElementById('drawResults').style.display = "none";
    }

    function simularSorteioInterno() {
        if (selecionadosVolante.size < 50) return alert("Selecione 50 n√∫meros no volante primeiro!");
        
        // Resetar marcas de sorteio anterior
        document.querySelectorAll('.num-btn').forEach(b => b.classList.remove('machine-hit'));
        
        let sorteados = [];
        while (sorteados.length < 20) {
            let n = Math.floor(Math.random() * 100).toString().padStart(2, '0');
            if (!sorteados.includes(n)) sorteados.push(n);
        }
        sorteados.sort();

        // Mostrar na tela
        const container = document.getElementById('drawnBallsContainer');
        container.innerHTML = sorteados.map(n => `<span class="drawn-ball">${n}</span>`).join('');
        
        let acertosVolante = 0;
        let acertosQ = 0, acertosI = 0, acertosM = 0;

        sorteados.forEach(n => {
            document.getElementById('v-' + n).classList.add('machine-hit');
            if (selecionadosVolante.has(n)) acertosVolante++;
            if (jogosGlobais.Quente.includes(n)) acertosQ++;
            if (jogosGlobais.Inedito.includes(n)) acertosI++;
            if (jogosGlobais.Misto.includes(n)) acertosM++;
        });

        document.getElementById('drawResults').style.display = "block";
        document.getElementById('scoreSimulacao').innerHTML = `
            Seu Volante: ${acertosVolante} acertos<br>
            <small style="font-size: 14px; color: #666">
                (Q: ${acertosQ} | I: ${acertosI} | M: ${acertosM})
            </small>`;
    }

    function formatarDezenasHTML(arrayDezenas) {
        return arrayDezenas.map(d => `<span class="num-ball" data-num="${d}">${d}</span>`).join(" ");
    }

    function analisarTudo() {
        const texto = document.getElementById('historico').value;
        const numeros = texto.match(/\b\d{1,2}\b/g);
        if (!numeros || numeros.length < 20) return alert("Insira os dados!");

        const totalSorteios = Math.floor(numeros.length / 20);
        let freq = Array(100).fill(0);
        let quads = [0, 0, 0, 0];

        numeros.forEach(n => {
            let v = parseInt(n);
            if (v < 100) {
                freq[v]++;
                if (v % 10 < 5 && v < 50) quads[0]++;
                else if (v % 10 >= 5 && v < 50) quads[1]++;
                else if (v % 10 < 5 && v >= 50) quads[2]++;
                else quads[3]++;
            }
        });

        const qCont = document.getElementById('quadContainer');
        qCont.innerHTML = "";
        const labels = ["Alto Esquerda (Q1)", "Alto Direita (Q2)", "Baixo Esquerda (Q3)", "Baixo Direita (Q4)"];
        
        let maxMedia = 0, minMedia = 99, qViciado = "", qFrio = "";

        quads.forEach((q, idx) => {
            let media = (q / totalSorteios).toFixed(1);
            if(media > maxMedia) { maxMedia = media; qViciado = labels[idx]; }
            if(media < minMedia) { minMedia = media; qFrio = labels[idx]; }

            let classe = media > 5.2 ? 'viciado' : (media < 4.8 ? 'frio' : '');
            qCont.innerHTML += `
                <div class="quad-card ${classe}">
                    <strong>${labels[idx]}</strong><br>M√©dia: ${media}
                    <div class="tooltip">N√∫meros: ${dezenasPorQuad[idx]}</div>
                </div>`;
        });

        document.getElementById('sugestaoDia').innerHTML = `
            üéØ SUGEST√ÉO: O quadrante <u>${qViciado}</u> est√° com for√ßa m√°xima. Foque nele para o Jogo Principal. 
            O <u>${qFrio}</u> est√° frio, excelente para buscar os 0 pontos no Espelho!`;

        let ranking = [];
        for(let k=0; k<100; k++) ranking.push({ d: k.toString().padStart(2,'0'), f: freq[k] });
        jogosGlobais.Quente = [...ranking].sort((a,b) => b.f - a.f).slice(0, 50).map(x => x.d).sort();
        jogosGlobais.Inedito = [...ranking].sort((a,b) => a.f - b.f).slice(0, 50).map(x => x.d).sort();
        let topQ = [...ranking].sort((a,b) => b.f - a.f).slice(0, 25).map(x => x.d);
        let topI = [...ranking].sort((a,b) => a.f - b.f).slice(0, 25).map(x => x.d);
        let mUnico = [...new Set([...topQ, ...topI])];
        if(mUnico.length < 50) {
            let neutros = [...ranking].sort((a,b) => Math.abs(a.f - (totalSorteios * 0.2))).map(x => x.d);
            for(let n of neutros) { if(mUnico.length >= 50) break; if(!mUnico.includes(n)) mUnico.push(n); }
        }
        jogosGlobais.Misto = mUnico.slice(0, 50).sort();

        document.getElementById('resQuente').innerHTML = formatarDezenasHTML(jogosGlobais.Quente);
        document.getElementById('resInedito').innerHTML = formatarDezenasHTML(jogosGlobais.Inedito);
        document.getElementById('resMisto').innerHTML = formatarDezenasHTML(jogosGlobais.Misto);
        document.getElementById('painel').style.display = "grid";
    }

    function gerarEspelho(tipo) {
        const todas = Array.from({length: 100}, (_, k) => k.toString().padStart(2, '0'));
        const esp = todas.filter(n => !jogosGlobais[tipo].includes(n)).sort();
        const div = document.getElementById('esp' + tipo);
        div.innerHTML = "<strong>ESPELHO:</strong> " + formatarDezenasHTML(esp);
        div.style.display = "block";
    }

    function calcularPremiacao() {
        const conf = document.getElementById('conferir').value.match(/\d+/g);
        if(!conf) return alert("Insira o resultado!");
        const sorteio = conf.map(n => n.padStart(2, '0'));
        
        // Limpar hits anteriores
        document.querySelectorAll('.num-ball').forEach(el => el.classList.remove('hit'));
        
        // Marcar novos hits
        sorteio.forEach(num => { 
            document.querySelectorAll(`.num-ball[data-num="${num}"]`).forEach(el => el.classList.add('hit')); 
        });

        const contar = (j) => j.length > 0 ? j.filter(n => sorteio.includes(n)).length : 0;
        const ac = { Q: contar(jogosGlobais.Quente), I: contar(jogosGlobais.Inedito), M: contar(jogosGlobais.Misto) };
        document.getElementById('detalheAcertos').innerHTML = `Acertos -> Q: ${ac.Q} | I: ${ac.I} | M: ${ac.M}`;
    }
</script>
</body>
</html>